# СкладОвощей — веб-приложение для управления продуктами, заказами и корзиной

## Описание

**СкладОвощей** — это веб-приложение, предназначенное для управления складом продуктовых товаров, добавления и редактирования позиций, ведения корзины, оформления заказов и отслеживания истории покупок. Система включает в себя регистрацию и авторизацию пользователей, личный кабинет, REST API для импорта товаров и интерфейс администратора на Django.

Проект разработан с использованием **Django**, **PostgreSQL**, и поддерживает как HTML-шаблоны, так и API-интеграцию.

## Основной функционал

### Работа с товарами
- Добавление товаров через HTML-форму (`add_good`)
- Поиск и фильтрация товаров в каталоге (`catalog`)
- Импорт товаров из JSON-файла (`load_goods_from_json`)
- Импорт товара через API (`add_goods_api`)
- Удаление товаров (`delete_good`)
- Просмотр каталога и главной страницы (`home`)

### Корзина
- Добавление товаров в корзину (`add_to_cart`)
- Изменение количества товаров в корзине (`update_cart`)
- Просмотр содержимого корзины (`view_cart`)
- Оформление заказа с очисткой корзины (`checkout`)

### Заказы
- Создание заказа с фиксацией общей суммы и позиций (`checkout`)
- Просмотр истории заказов (`order_history`)

### Пользователи
- Регистрация пользователя (`register_view`)
- Аутентификация и выход из системы (`login_view`, `logout_view`)
- Личный кабинет (`profile`)
- Перенаправление на кабинет или форму входа (`personal_cabinet_redirect`)

### API
- Импорт одного товара через POST-запрос в формате JSON
- Валидация структуры JSON и логгирование ошибок

## Технологии

- Язык программирования: **Python 3.10+**
- Фреймворк: **Django**
- База данных: **PostgreSQL**
- Формы: **Django Forms**
- REST API (на уровне представлений)
- HTML-шаблоны (без использования фронтенд-фреймворков)
- Сессии и CSRF-защита
- Логгирование событий и действий пользователей (`logging`)

## Скриншоты

### Главная страница
![Скриншот главной страницы](https://github.com/Ryota77777/ModuleAppDataBase1/blob/main/templates/main2.jpg?raw=true)

### Каталог
![Скриншот каталога товаров](https://github.com/Ryota77777/ModuleAppDataBase1/blob/main/templates/catalog.jpg?raw=true)

### Заказы
![Скриншот страницы заказов](https://github.com/Ryota77777/ModuleAppDataBase1/blob/main/templates/orders.jpg?raw=true)

### Корзина
![Скриншот корзины](https://github.com/Ryota77777/ModuleAppDataBase1/blob/main/templates/card.jpg?raw=true)


## Безопасность и доступ

- Все действия с корзиной, заказами и личным кабинетом защищены через `@login_required`
- Защита от CSRF для всех POST-запросов, кроме API (`@csrf_exempt`)
- Проверка прав доступа и корректности запросов через `get_object_or_404`, фильтрацию данных и обработку ошибок

## Логирование

В системе реализовано централизованное логгирование всех действий:
- Добавление/удаление товаров
- Добавление в корзину и оформление заказа
- Аутентификация пользователя
- Импорт из JSON/API
- Просмотры и действия пользователей

## Требования

- Python 3.10+
- Django 4.x
- PostgreSQL (или SQLite для отладки)
- Установленные зависимости из `requirements.txt`

## Установка и запуск (локально)

```bash
git clone https://github.com/Ryota77777/SkladOvoshey.git
cd SkladOvoshey
python -m venv venv
source venv/bin/activate  # или venv\Scripts\activate на Windows
pip install -r requirements.txt
python manage.py migrate
python manage.py createsuperuser  # для доступа к админке
python manage.py runserver
```
